<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Mathias Riedel Photography</title>

  <link href="https://fonts.googleapis.com/css?family=Great+Vibes|Open+Sans&display=swap" rel="stylesheet">

  <link href="gallery.css" rel="stylesheet">
  <script>
    function left() {
      let number = document.getElementById("page-overlay").getElementsByTagName("img")[0].src.match(/\d+/)[0];
      if (number == 1) { number = 21; }
      else { number -= 1; }
      document.getElementById("page-overlay").getElementsByTagName("img")[0].src = "assets\\iceland\\(" + number + ")_big.jpg";
      event.stopPropagation();
    }
    function right() {
      let number = document.getElementById("page-overlay").getElementsByTagName("img")[0].src.match(/\d+/)[0];
      if (number == 21) { number = 1; }
      else { number++; }
      document.getElementById("page-overlay").getElementsByTagName("img")[0].src = "assets\\iceland\\(" + number + ")_big.jpg";
      event.stopPropagation();
    }
    function myFunction(x) {
      x.classList.toggle("change");
      document.getElementById("sidebar").classList.toggle("openBar");
      document.getElementById("photos").classList.toggle("openBar");
    }
    window.addEventListener("load", function () {
      document.onkeydown = checkKey;
      function checkKey(e) {
        e = e || window.event;
        if (e.keyCode == '37') {
          left();
        }
        else if (e.keyCode == '39') {
          right();
        }
      }
      var photos = [
        { path: "assets\\iceland\\(1).jpg", width: 212, height: 300 },
        { path: "assets\\iceland\\(10).jpg", width: 450, height: 300 },
        { path: "assets\\iceland\\(11).jpg", width: 450, height: 300 },
        { path: "assets\\iceland\\(12).jpg", width: 450, height: 300 },
        { path: "assets\\iceland\\(13).jpg", width: 450, height: 300 },
        { path: "assets\\iceland\\(14).jpg", width: 450, height: 300 },
        { path: "assets\\iceland\\(15).jpg", width: 200, height: 300 },
        { path: "assets\\iceland\\(16).jpg", width: 450, height: 300 },
        { path: "assets\\iceland\\(17).jpg", width: 200, height: 300 },
        { path: "assets\\iceland\\(18).jpg", width: 300, height: 200 },
        { path: "assets\\iceland\\(19).jpg", width: 300, height: 200 },
        { path: "assets\\iceland\\(2).jpg", width: 200, height: 300 },
        { path: "assets\\iceland\\(20).jpg", width: 300, height: 200 },
        { path: "assets\\iceland\\(21).jpg", width: 300, height: 200 },
        { path: "assets\\iceland\\(3).jpg", width: 200, height: 300 },
        { path: "assets\\iceland\\(4).jpg", width: 450, height: 300 },
        { path: "assets\\iceland\\(5).jpg", width: 450, height: 300 },
        { path: "assets\\iceland\\(6).jpg", width: 450, height: 300 },
        { path: "assets\\iceland\\(7).jpg", width: 200, height: 300 },
        { path: "assets\\iceland\\(8).jpg", width: 450, height: 300 },
        { path: "assets\\iceland\\(9).jpg", width: 450, height: 300 }
      ];
      let rows = [];
      let row = [];
      let currentWidth = 0;
      photos.forEach(photo => {
        row.push(photo);
        currentWidth += Math.round((250 / photo.height) * photo.width);
        currentWidth += 10;
        if (currentWidth >= window.innerWidth * 0.8) {
          row.currentWidth = currentWidth;
          rows.push(row);
          row = [];
          currentWidth = 0;
        }
      });
      rows.forEach(row => {
        let rowWidth = row.currentWidth;
        row.forEach(photo => {
          img = document.createElement('img');
          img.src = photo.path;
          img.draggable = false;
          if (window.innerWidth >= 800) {
            let ratio = window.innerWidth * 0.8 / rowWidth;
            img.height = 250 * ratio - 10;
          }
          document.getElementById('photos').appendChild(img);
        });
      });
      var images = document.getElementsByTagName("img");
      for (var i = 1; i < images.length; i++) {
        images[i].addEventListener("click", (e) => {
          document.getElementById("page-overlay").style.display = "block";
          document.getElementById("page-overlay").getElementsByTagName("img")[0].src = e.target.src.replace('.jpg', '_big.jpg');
          document.getElementById("page-overlay").addEventListener("click", function () {
            document.getElementById("page-overlay").style.display = "none";
          });
        });
      }
    });
  </script>
</head>

<body>
  <div class="container" onclick="myFunction(this)">
    <div class="bar1"></div>
    <div class="bar2"></div>
    <div class="bar3"></div>
  </div>
  <div id="page-overlay">
    <div class="close"></div>
    <div class="left-arrow" onclick="left()"></div>
    <img src="" oncontextmenu="return false" draggable="false">
    <div class="right-arrow" onclick="right()"></div>
  </div>
  <section id="sidebar">
    <div id="menu">
      <a href="index.html"><img src="assets/logo.png"></a>
      <ul>
        <li><a href="austria.html">Austria</a></li>
        <li><a href="canada.html">Canada</a></li>
        <li><a href="favorites.html">Favorites 2018-19</a></li>
        <li><a href="germany.html">Germany</a></li>
        <li><a href="#" style="color: black; font-style: italic;">Iceland</a></li>
        <li><a href="madeira.html">Madeira</a></li>
      </ul>
      <footer>
        <span id="copyright">&copy;2019, Mathias Riedel</span><br>
        <span id="impressum"><a href="impressum.html">Impressum</a></span><br>
        <span id="instagram"><a href="https://instagram.com/mathiasriedelphotography">Instagram</a></span>
      </footer>
    </div>
  </section>
  <section id="photos" oncontextmenu="return false">

  </section>
</body>

</html>
