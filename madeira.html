<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Mathias Riedel Photography</title>

  <link href="https://fonts.googleapis.com/css?family=Great+Vibes|Open+Sans&display=swap" rel="stylesheet">

  <link href="gallery.css" rel="stylesheet">
  <script>
    function left() {
      let number = document.getElementById("page-overlay").getElementsByTagName("img")[0].src.match(/\d+/)[0];
      if (number == 1) { number = 29; }
      else { number -= 1; }
      document.getElementById("page-overlay").getElementsByTagName("img")[0].src = "assets\\madeira\\(" + number + ")_big.jpg";
      event.stopPropagation();
    }
    function right() {
      let number = document.getElementById("page-overlay").getElementsByTagName("img")[0].src.match(/\d+/)[0];
      if (number == 29) { number = 1; }
      else { number++; }
      document.getElementById("page-overlay").getElementsByTagName("img")[0].src = "assets\\madeira\\(" + number + ")_big.jpg";
      event.stopPropagation();
    }
    function myFunction(x) {
      x.classList.toggle("change");
      document.getElementById("sidebar").classList.toggle("openBar");
      document.getElementById("photos").classList.toggle("openBar");
    }
    window.addEventListener("load", function () {
      document.onkeydown = checkKey;
      function checkKey(e) {
        e = e || window.event;
        if (e.keyCode == '37') {
          left();
        }
        else if (e.keyCode == '39') {
          right();
        }
      }
      var photos = [
        { path: "assets\\madeira\\(5).jpg", width: 5002, height: 3390 },
        { path: "assets\\madeira\\(6).jpg", width: 5092, height: 3456 },
        { path: "assets\\madeira\\(7).jpg", width: 3369, height: 4927 },
        { path: "assets\\madeira\\(8).jpg", width: 5184, height: 3456 },
        { path: "assets\\madeira\\(9).jpg", width: 3635, height: 3456 },
        { path: "assets\\madeira\\(10).jpg", width: 3456, height: 5184 },
        { path: "assets\\madeira\\(11).jpg", width: 2525, height: 4379 },
        { path: "assets\\madeira\\(12).jpg", width: 3456, height: 5184 },
        { path: "assets\\madeira\\(13).jpg", width: 5140, height: 3334 },
        { path: "assets\\madeira\\(14).jpg", width: 5184, height: 3329 },
        { path: "assets\\madeira\\(15).jpg", width: 3362, height: 4995 },
        { path: "assets\\madeira\\(16).jpg", width: 3377, height: 5168 },
        { path: "assets\\madeira\\(17).jpg", width: 4596, height: 2833 },
        { path: "assets\\madeira\\(18).jpg", width: 3456, height: 5105 },
        { path: "assets\\madeira\\(19).jpg", width: 4870, height: 2985 },
        { path: "assets\\madeira\\(20).jpg", width: 4595, height: 3387 },
        { path: "assets\\madeira\\(21).jpg", width: 4225, height: 2948 },
        { path: "assets\\madeira\\(22).jpg", width: 5184, height: 3456 },
        { path: "assets\\madeira\\(23).jpg", width: 3282, height: 4805 },
        { path: "assets\\madeira\\(24).jpg", width: 3337, height: 4769 },
        { path: "assets\\madeira\\(25).jpg", width: 3456, height: 5184 },
        { path: "assets\\madeira\\(26).jpg", width: 5184, height: 3456 },
        { path: "assets\\madeira\\(27).jpg", width: 5184, height: 3456 },
        { path: "assets\\madeira\\(28).jpg", width: 3365, height: 4921 },
        { path: "assets\\madeira\\(29).jpg", width: 5184, height: 3456 },
        { path: "assets\\madeira\\(1).jpg", width: 5184, height: 3456 },
        { path: "assets\\madeira\\(2).jpg", width: 5184, height: 3456 },
        { path: "assets\\madeira\\(3).jpg", width: 5184, height: 3063 },
        { path: "assets\\madeira\\(4).jpg", width: 4664, height: 2832 }
      ];
      let rows = [];
      let row = [];
      let currentWidth = 0;
      photos.forEach(photo => {
        row.push(photo);
        currentWidth += Math.round((200 / photo.height) * photo.width);
        currentWidth += 10;
        if (currentWidth >= window.innerWidth * 0.8) {
          row.currentWidth = currentWidth;
          rows.push(row);
          row = [];
          currentWidth = 0;
        }
      });
      rows.forEach(row => {
        let rowWidth = row.currentWidth;
        row.forEach(photo => {
          img = document.createElement('img');
          img.src = photo.path;
          img.draggable = false;
          if (window.innerWidth >= 800) {
            let ratio = window.innerWidth * 0.8 / rowWidth;
            img.height = 200 * ratio - 10;
          }
          document.getElementById('photos').appendChild(img);
        });
      });
      var images = document.getElementsByTagName("img");
      for (var i = 1; i < images.length; i++) {
        images[i].addEventListener("click", (e) => {
            document.getElementById("page-overlay").style.display = "block";
            document.getElementById("page-overlay").getElementsByTagName("img")[0].src = e.target.src.replace('.jpg', '_big.jpg');
            document.getElementById("page-overlay").addEventListener("click", function () {
              document.getElementById("page-overlay").style.display = "none";
            });
        });
      }
    });
  </script>
</head>

<body>
  <div class="container" onclick="myFunction(this)">
    <div class="bar1"></div>
    <div class="bar2"></div>
    <div class="bar3"></div>
  </div>
  <div id="page-overlay">
    <div class="close"></div>
    <div class="left-arrow" onclick="left()"></div>
    <img src="" oncontextmenu="return false" draggable="false">
    <div class="right-arrow" onclick="right()"></div>
  </div>
  <section id="sidebar">
    <div id="menu">
      <a href="index.html"><img src="assets/logo.png"></a>
      <ul>
        <li><a href="austria.html">Austria</a></li>
        <li><a href="canada.html">Canada</a></li>
        <li><a href="favorites.html">Favorites 2018-19</a></li>
        <li><a href="germany.html">Germany</a></li>
        <li><a href="iceland.html">Iceland</a></li>
        <li><a href="madeira.html" style="color: black; font-style: italic;">Madeira</a></li>
      </ul>
      <footer>
        <span id="copyright">&copy;2019, Mathias Riedel</span><br>
        <span id="impressum"><a href="impressum.html">Impressum</a></span><br>
        <span id="instagram"><a href="https://instagram.com/mathiasriedelphotography">Instagram</a></span>
      </footer>
    </div>
  </section>
  <section id="photos" oncontextmenu="return false">

  </section>
</body>

</html>
